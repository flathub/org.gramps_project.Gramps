# Core dependencies for Gramps
name: DepsCore
buildsystem: simple
build-commands: []
modules:
# PILLOW for cropping images, latex support, and addons; most recent version as of 2025.03 is from 2025.01
  - name: PILLOWDependency
    buildsystem: simple
    build-commands:
      - pip3 install --no-build-isolation .
    sources:
      - type: archive
        url:  https://files.pythonhosted.org/packages/f3/af/c097e544e7bd278333db77933e535098c259609c4eb3b85381109602fb5b/pillow-11.1.0.tar.gz
        sha256:  368da70808b36d73b4b390a8ffac11069f8a5c85f29eff1f1b01bcf3ef5b2a20
# Goocanvas is abandoned and the most recent update is from 2021.01.16
  - name: GoocanvasDependency
    buildsystem: autotools
    config-opts:
      - --prefix=/app
    make-install-args:
      - pyoverridesdir=/app/lib/python3.13/site-packages/gi/overrides
      - typelibdir=/app/lib/girepository-1.0
    sources:
      - type: archive
        url:  https://download.gnome.org/sources/goocanvas/3.0/goocanvas-3.0.0.tar.xz
        sha256:  670a7557fe185c2703a14a07506156eceb7cea3b4bf75076a573f34ac52b401a
      - type: patch
        path: goocanvas-3.0.0-gcc14.patch
# pyicu is a recommended dep for Gramps; most recent release as of 2025.03 was from 2024.10
  - name: PyICUDependency
    buildsystem: simple
    build-commands:
      - pip3 install --no-build-isolation .
    sources:
      - type: archive
        url: https://files.pythonhosted.org/packages/52/21/4e9b0a3ace3027fc63107fa2b5d6e66e321e104da071d787856962fbad52/PyICU-2.14.tar.gz
        sha256: acc7eb92bd5c554ed577249c6978450a4feda0aa6f01470152b3a7b382a02132
# graphviz is a recommended dep for Gramps; most recent version as of 2025.03 from 2024.12
  - name: GraphVizDependency
    buildsystem: autotools
    sources:
      - type: archive
        url: https://gitlab.com/api/v4/projects/4207231/packages/generic/graphviz-releases/12.2.1/graphviz-12.2.1.tar.gz
        sha256: 242bc18942eebda6db4039f108f387ec97856fc91ba47f21e89341c34b554df8
# pygraphviz allows graphviz to work with python; 1.14 most recent version 2024.09.29 as of 2025.03
  - name: PyGraphVizDependency
    buildsystem: simple
    build-commands:
      - pip3 install --no-build-isolation .
    sources:
      - type: archive
        url: https://github.com/pygraphviz/pygraphviz/archive/refs/tags/pygraphviz-1.14.tar.gz
        sha256:  d9a43f34b920367fa89a2598083b47db42a28078aff7d4e2cb41475137532560
# ghostscript is recommended for Gramps; most recent version as of 2025.11 was from 2025.09
  - name: GhostscriptDependency
    buildsystem: autotools
    sources:
      - type: archive
        url:  https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs10060/ghostscript-10.06.0.tar.gz
        sha256:  5bd6da34794928cc7e616f288e32bd0be7f9a5ca2d3c206a0af2c19a4e3a318f
# most recent version as of 2025.11 is from 2025.10
  - name: orjsonDependency
    buildsystem: simple
    build-commands:
      - pip3 install --no-deps orjson-*.whl
    sources:
      - type: file
        only-arches: [x86_64]
        url: https://files.pythonhosted.org/packages/aa/fd/d0733fcb9086b8be4ebcfcda2d0312865d17d0d9884378b7cffb29d0763f/orjson-3.11.4-cp313-cp313-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
        sha256:  1469d254b9884f984026bd9b0fa5bbab477a4bfe558bba6848086f6d43eb5e73
      - type: file
        only-arches: [aarch64]
        url: https://files.pythonhosted.org/packages/55/b9/ae8d34899ff0c012039b5a7cb96a389b2476e917733294e498586b45472d/orjson-3.11.4-cp313-cp313-manylinux_2_17_aarch64.manylinux2014_aarch64.whl
        sha256: 38aa9e65c591febb1b0aed8da4d469eba239d434c218562df179885c94e1a3ad
# Gspell most recent version as of 2025.03 was from 2024.09
  - name: gspell
    buildsystem: meson
    sources: 
      - type: archive
        url: https://gitlab.gnome.org/GNOME/gspell/-/archive/1.14.0/gspell-1.14.0.tar.gz
        sha256: 6ff11258569227c4ef0eaed0524e0c9f84308d34f89fbc49e5d961cdd832ac6a
